---
// Header Component with Navigation
const pathname = Astro.url.pathname;

const navLinks = [
  { href: '/', label: 'گھر', labelEn: 'Home' },
  { href: '/about', label: 'تعارف', labelEn: 'About' },
  { href: '/books', label: 'کتب', labelEn: 'Books' },
  { href: '/life-journey', label: 'زندگی', labelEn: 'Life' },
  { href: '/upcoming', label: 'آئندہ', labelEn: 'Upcoming' },
  { href: '/translation', label: 'ترجمہ', labelEn: 'Translation' },
  { href: '/contact', label: 'رابطہ', labelEn: 'Contact' },
];
---

<nav class="fixed top-0 left-0 right-0 w-full bg-gradient-to-br from-[#8B2635] to-[#6B1A27] py-4 shadow-[0_4px_20px_rgba(139,38,53,0.3)] z-[1000] backdrop-blur-sm">
  <div class="max-w-[1400px] mx-auto px-4 sm:px-6 md:px-10 relative z-[2] flex justify-between items-center">
    <a href="/" class="text-xl sm:text-2xl md:text-[28px] font-bold text-[#D4AF37] [text-shadow:2px_2px_4px_rgba(0,0,0,0.3)] font-['Noto_Nastaliq_Urdu',serif] no-underline transition-all duration-300 hover:scale-105">
      عبدالباری ایم کے
    </a>
    
    <button 
      class="md:hidden flex flex-col gap-1.5 bg-transparent border-0 cursor-pointer p-2 z-50 relative" 
      aria-label="Toggle menu" 
      id="mobile-menu-btn"
      type="button"
    >
      <span class="block w-6 h-0.5 bg-[#D4AF37] rounded-sm transition-all duration-300 menu-line-1"></span>
      <span class="block w-6 h-0.5 bg-[#D4AF37] rounded-sm transition-all duration-300 menu-line-2"></span>
      <span class="block w-6 h-0.5 bg-[#D4AF37] rounded-sm transition-all duration-300 menu-line-3"></span>
    </button>
    
    <ul 
      class="hidden md:flex gap-6 lg:gap-9 list-none m-0 p-0 mobile-menu" 
      id="nav-links"
    >
      {navLinks.map(link => (
        <li>
          <a 
            href={link.href} 
            class={`text-sm lg:text-base font-semibold text-[#F5F5F0] no-underline transition-all duration-300 relative px-2 lg:px-2.5 py-1.5 inline-block hover:text-[#D4AF37] ${pathname === link.href || (link.href !== '/' && pathname.startsWith(link.href)) ? 'text-[#D4AF37] nav-active' : ''} nav-link-item`}
          >
            {link.label}
          </a>
        </li>
      ))}
    </ul>
  </div>
</nav>

<script is:inline>
  (function() {
    const menuBtn = document.getElementById('mobile-menu-btn');
    const navLinks = document.getElementById('nav-links');
    
    if (!menuBtn || !navLinks) return;
    
    menuBtn.addEventListener('click', function(e) {
      e.stopPropagation();
      navLinks.classList.toggle('mobile-menu-open');
      menuBtn.classList.toggle('menu-open');
      document.body.style.overflow = navLinks.classList.contains('mobile-menu-open') ? 'hidden' : '';
    });

    // Close menu when clicking a link
    const navLinksItems = navLinks.querySelectorAll('a');
    navLinksItems.forEach(link => {
      link.addEventListener('click', function() {
        navLinks.classList.remove('mobile-menu-open');
        menuBtn.classList.remove('menu-open');
        document.body.style.overflow = '';
      });
    });

    // Close menu when clicking outside
    document.addEventListener('click', function(event) {
      if (navLinks.classList.contains('mobile-menu-open')) {
        if (!navLinks.contains(event.target) && !menuBtn.contains(event.target)) {
          navLinks.classList.remove('mobile-menu-open');
          menuBtn.classList.remove('menu-open');
          document.body.style.overflow = '';
        }
      }
    });
  })();
</script>

<style>
  /* Mobile Menu Styles */
  @media (max-width: 767px) {
    .mobile-menu {
      position: fixed;
      top: 60px;
      left: 0;
      right: 0;
      background: linear-gradient(135deg, #8B2635 0%, #6B1A27 100%);
      flex-direction: column;
      padding: 20px;
      gap: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transform: translateX(-100%);
      opacity: 0;
      visibility: hidden;
      transition: transform 0.3s ease, opacity 0.3s ease, visibility 0.3s;
      max-height: calc(100vh - 60px);
      overflow-y: auto;
      z-index: 999;
    }

    .mobile-menu-open {
      display: flex !important;
      transform: translateX(0) !important;
      opacity: 1 !important;
      visibility: visible !important;
    }

    .mobile-menu li {
      width: 100%;
    }

    .nav-link-item {
      display: block;
      width: 100%;
      padding: 12px 16px !important;
      font-size: 18px !important;
      text-align: right;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .nav-link-item:hover {
      background: rgba(212, 175, 55, 0.1);
      border-radius: 8px;
    }

    /* Hamburger Animation */
    .menu-open .menu-line-1 {
      transform: rotate(45deg) translate(8px, 8px);
    }

    .menu-open .menu-line-2 {
      opacity: 0;
    }

    .menu-open .menu-line-3 {
      transform: rotate(-45deg) translate(7px, -7px);
    }
  }

  /* Desktop Navigation */
  @media (min-width: 768px) {
    .nav-link-item::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 0;
      height: 2px;
      background: #D4AF37;
      transition: width 0.3s ease;
      transform: translateX(-50%);
    }

    .nav-link-item:hover::after,
    .nav-active::after {
      width: 80%;
    }
  }
</style>
